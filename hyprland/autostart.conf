# --- Autostart Applications ---

# --- GUI root applications support ---
# 1. Forward environment variables to systemd user session
exec-once = dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# 2. Import environment variables to user systemd
exec-once = systemctl --user import-environment DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# 3. Polkit authentication agent (for password prompts)
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# 4. Allow root users to connect to XWayland
exec-once = xhost +SI:localuser:root

# --- Optional: XDG portals for GTK/Flatpak applications ---
exec-once = /usr/lib/xdg-desktop-portal &
exec-once = /usr/lib/xdg-desktop-portal-gtk &

# --- Other autostart applications ---
exec-once = quickshell -c noctalia-shell
# exec-once = eww open bar &  # Commented out eww bar since using quickshell
exec-once = swww-daemon & # sleep && hyprpaper &
exec-once = hypridle &
exec-once = swaync &
exec-once = nm-applet --indicator &
exec-once = blueman-applet &
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = wl-clip-persist --clipboard regular &
exec-once = clipse -listen
exec-once = ~/Configs/hyprland/scripts/start-betterbird.sh
exec-once = openrgb --startminimized &
exec-once = ~/Applications/whph/whph --system-tray &
exec-once = discord &
exec-once = easyeffects --gapplication-service &

# For screen sharing
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# KDE Integration
exec-once = /usr/bin/kdeconnectd
exec-once = /usr/bin/kded6
exec-once = sleep 5 && kbuildsycoca6
exec-once = kdeconnect-indicator
